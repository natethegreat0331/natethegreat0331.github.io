<!DOCTYPE html>
<html>
  <head>
    <title>Images</title>
    <style>
      body {
        animation: color-change 20s infinite alternate;
        color: rgb(6, 10, 44);
        padding: 10px;
        font-family: perpetua;
      }
      #all-contents {
        max-width: 1200px;
        margin: auto;
      }
      nav {
        background: rgb(255, 0, 0);
        margin: 0 auto;
        display: flex;
        padding: 10px;
        margin-bottom: 20px;
        border-radius: 25% 10%;
      }
      h1 {
        display: flex;
        align-items: center;
        color: white;
        flex: 1;
        margin: 0;
      }
      #nav-ul {
        list-style-image: none;
        text-align: center;
      }
      .nav-li {
        display: inline-block;
        padding: 0 10px;
        text-align: center;
      }
      #navanchor {
        text-decoration: none;
        color: rgb(255, 255, 255);
        padding-right: 25px;
      }
      .image-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 24px;
        background: beige;
        border-radius: 10px;
        box-shadow: 6px 6px #0000004b;
        padding: 32px;
      }
      .grid-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        background: #fff8e1;
        border-radius: 8px;
        box-shadow: 2px 2px 8px #0000001a;
        padding: 12px;
      }
      .grid-item img {
        width: 100%;
        aspect-ratio: 1/1;
        object-fit: cover;
        border-radius: 6px;
        margin-bottom: 8px;
        box-shadow: 1px 1px 6px #00000022;
        transition: transform 0.2s;
        cursor: pointer;
      }
      .grid-item img:hover {
        transform: scale(1.05);
        box-shadow: 0 0 16px #00000044;
      }
      .caption {
        color: #333;
        font-size: 1.1em;
        text-align: center;
        margin-top: 4px;
      }
      /* Modal styles */
      .modal {
        display: flex;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100vw;
        height: 100vh;
        overflow: auto;
        background: transparent; /* No gray overlay */
        justify-content: center;
        align-items: center;
        pointer-events: none;
      }
      .modal-content {
        background: #fff;
        margin: auto;
        padding: 16px;
        border-radius: 12px;
        box-shadow: 0 0 32px #00000066;
        max-width: 90vw;
        max-height: 80vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        animation: pop-in 0.2s;
        cursor: grab;
        user-select: none;
        pointer-events: auto;
      }
      .modal-content.dragging {
        cursor: grabbing;
        opacity: 0.95;
      }
      .modal-img {
        max-width: 80vw;
        max-height: 60vh;
        border-radius: 8px;
        box-shadow: 0 0 16px #00000033;
      }
      .modal-caption {
        margin-top: 12px;
        color: #222;
        font-size: 1.2em;
        text-align: center;
      }
      .close {
        position: absolute;
        top: 8px;
        right: 16px;
        color: #333;
        font-size: 2em;
        font-weight: bold;
        cursor: pointer;
        transition: color 0.2s;
        z-index: 10;
      }
      .close:hover {
        color: #ff5733;
      }
      @keyframes color-change {
        0% {
          background-color: #ff5733;
        }
        25% {
          background-color: #33ff57;
        }
        50% {
          background-color: #3357ff;
        }
        75% {
          background-color: #ff33a8;
        }
        100% {
          background-color: #ff5733;
        }
      }
      @keyframes pop-in {
        from {
          transform: scale(0.8);
          opacity: 0;
        }
        to {
          transform: scale(1);
          opacity: 1;
        }
      }
    </style>
  </head>
  <body>
    <div id="all-contents">
      <nav>
        <h1>Nate's Great Website</h1>
        <ul id="nav-ul">
          <li class="nav-li">
            <a id="navanchor" href="index.html">Home</a>
          </li>
          <li class="nav-li">
            <a id="navanchor" href="portfolio.html">Portfolio</a>
          </li>
          <li class="nav-li">
            <a id="navanchor" href="images.html">Images</a>
          </li>
        </ul>
      </nav>
      <div class="image-grid">
        <div class="grid-item">
          <img src="assets/1Line.jpg" alt="Unused Flag Pole" data-caption="Unused Flag Pole Waiting for Its Time" />
          <div class="caption">Unused Flag Pole Waiting for Its Time</div>
        </div>
        <div class="grid-item">
          <img src="assets/2Contrast.jpg" alt="Mountain Breaching Sky" data-caption="The Mountain Breaching the Blue Sky" />
          <div class="caption">The Mountain Breaching the Blue Sky</div>
        </div>
        <div class="grid-item">
          <img src="assets/3Beauty.jpg" alt="Crow in Tree" data-caption="Crow in the Tree" />
          <div class="caption">Crow in the Tree</div>
        </div>
        <div class="grid-item">
          <img src="assets/4Ant.jpg" alt="Bush Bottom View" data-caption="Bush From a Bottom's View" />
          <div class="caption">Bush From a Bottom's View</div>
        </div>
        <div class="grid-item">
          <img src="assets/5Shape.jpg" alt="Crayons Comb" data-caption="Crayons Forming a Comb" />
          <div class="caption">Crayons Forming a Comb</div>
        </div>
        <div class="grid-item">
          <img src="assets/6Me.jpg" alt="Stud" data-caption="An Absolute Stud" />
          <div class="caption">An Absolute Stud</div>
        </div>
        <div class="grid-item">
          <img src="assets/7Texture.jpg" alt="Cave Formation" data-caption="A Cave Formation" />
          <div class="caption">A Cave Formation</div>
        </div>
        <div class="grid-item">
          <img src="assets/8Symbol.jpg" alt="W Fire" data-caption="A W Formed with Fire" />
          <div class="caption">A W Formed with Fire</div>
        </div>
        <div class="grid-item">
          <img src="assets/9Thirds.jpg" alt="Squirrel in Snow" data-caption="A Stoic Squirrel in the Snow" />
          <div class="caption">A Stoic Squirrel in the Snow</div>
        </div>
        <div class="grid-item">
          <img src="assets/10CHS.jpg" alt="School Entrance" data-caption="The School's Entrance" />
          <div class="caption">The School's Entrance</div>
        </div>
      </div>
    </div>
    <script>
      // Helper to create a modal for an image
      function createModal(img) {
        // Modal wrapper
        const modal = document.createElement("div");
        modal.className = "modal";
        modal.style.display = "flex";

        // Modal content
        const modalContent = document.createElement("div");
        modalContent.className = "modal-content";
        modalContent.tabIndex = 0;

        // Close button
        const closeBtn = document.createElement("span");
        closeBtn.className = "close";
        closeBtn.innerHTML = "&times;";
        closeBtn.onclick = () => document.body.removeChild(modal);

        // Image
        const modalImg = document.createElement("img");
        modalImg.className = "modal-img";
        modalImg.src = img.src;
        modalImg.alt = img.alt;

        // Caption
        const modalCaption = document.createElement("div");
        modalCaption.className = "modal-caption";
        modalCaption.textContent = img.getAttribute("data-caption") || img.alt;

        // Assemble
        modalContent.appendChild(closeBtn);
        modalContent.appendChild(modalImg);
        modalContent.appendChild(modalCaption);
        modal.appendChild(modalContent);
        document.body.appendChild(modal);

        // Drag logic
        let isDragging = false;
        let dragOffsetX = 0;
        let dragOffsetY = 0;

        modalContent.addEventListener("mousedown", function (e) {
          isDragging = true;
          modalContent.classList.add("dragging");
          const rect = modalContent.getBoundingClientRect();
          dragOffsetX = e.clientX - rect.left;
          dragOffsetY = e.clientY - rect.top;
          modalContent.style.transform = "none";
        });

        document.addEventListener("mousemove", function (e) {
          if (isDragging) {
            let left = e.clientX - dragOffsetX;
            let top = e.clientY - dragOffsetY;
            const modalRect = modalContent.getBoundingClientRect();
            const minLeft = 0;
            const minTop = 0;
            const maxLeft = window.innerWidth - modalRect.width;
            const maxTop = window.innerHeight - modalRect.height;
            left = Math.max(minLeft, Math.min(left, maxLeft));
            top = Math.max(minTop, Math.min(top, maxTop));
            modalContent.style.left = left + "px";
            modalContent.style.top = top + "px";
          }
        });

        document.addEventListener("mouseup", function () {
          if (isDragging) {
            isDragging = false;
            modalContent.classList.remove("dragging");
          }
        });

        // Touch support
        modalContent.addEventListener("touchstart", function (e) {
          if (e.touches.length === 1) {
            isDragging = true;
            modalContent.classList.add("dragging");
            const rect = modalContent.getBoundingClientRect();
            dragOffsetX = e.touches[0].clientX - rect.left;
            dragOffsetY = e.touches[0].clientY - rect.top;
            modalContent.style.transform = "none";
          }
        });

        document.addEventListener("touchmove", function (e) {
          if (isDragging && e.touches.length === 1) {
            let left = e.touches[0].clientX - dragOffsetX;
            let top = e.touches[0].clientY - dragOffsetY;
            const modalRect = modalContent.getBoundingClientRect();
            const minLeft = 0;
            const minTop = 0;
            const maxLeft = window.innerWidth - modalRect.width;
            const maxTop = window.innerHeight - modalRect.height;
            left = Math.max(minLeft, Math.min(left, maxLeft));
            top = Math.max(minTop, Math.min(top, maxTop));
            modalContent.style.left = left + "px";
            modalContent.style.top = top + "px";
          }
        });

        document.addEventListener("touchend", function () {
          if (isDragging) {
            isDragging = false;
            modalContent.classList.remove("dragging");
          }
        });

        // Close modal on background click or Escape key
        modal.onclick = function (event) {
          if (event.target === modal) {
            document.body.removeChild(modal);
          }
        };
        modalContent.focus();
        modalContent.addEventListener("keydown", function (event) {
          if (event.key === "Escape") {
            document.body.removeChild(modal);
          }
        });

        // Initial position
        modalContent.style.left = "50%";
        modalContent.style.top = "50%";
        modalContent.style.transform = "translate(-50%, -50%)";
      }

      document.querySelectorAll(".grid-item img").forEach((img) => {
        img.addEventListener("click", function (e) {
          createModal(this);
          e.stopPropagation();
        });
      });
    </script>
  </body>
</html>
